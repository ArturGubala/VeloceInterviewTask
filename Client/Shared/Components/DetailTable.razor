@using UsersSpying.Shared.Models
<MudTable Items="@CustomFields" Context="CustomFieldsContext" Hover="true" Breakpoint="Breakpoint.Sm" Elevation="0"
          Dense="true" ReadOnly="false" CanCancelEdit="true" CommitEditTooltip="Commit Edit" RowEditPreview="BackupItem" 
          RowEditCancel="ResetItemToOriginalValues" RowEditCommit="ItemHasBeenCommitted" IsEditRowSwitchingBlocked="true" 
          ApplyButtonPosition="TableApplyButtonPosition.End" EditButtonPosition="TableEditButtonPosition.End" EditTrigger="TableEditTrigger.RowClick">
    <HeaderContent>
        <MudTh>Nazwa</MudTh>
        <MudTh>Wartość</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Nazwa">@CustomFieldsContext.Name</MudTd>
        <MudTd DataLabel="Wartość">@CustomFieldsContext.Value</MudTd>
    </RowTemplate>
    <RowEditingTemplate>
        <MudTd DataLabel="Sign">
            <MudTextField @bind-Value="@CustomFieldsContext.Name" Required/>
        </MudTd>
        <MudTd DataLabel="Name">
             <MudTextField @bind-Value="@CustomFieldsContext.Value" Required />
        </MudTd>
    </RowEditingTemplate>
</MudTable>

@code {
    [Parameter] public List<CustomField> CustomFields { get; set; } = new List<CustomField>();

    private void BackupItem(object element)
    {
    // elementBeforeEdit = new()
    // {
    //     Sign = ((Element)element).Sign,
    //     Name = ((Element)element).Name,
    //     Molar = ((Element)element).Molar,
    //     Position = ((Element)element).Position
    // };
    // AddEditionEvent($"RowEditPreview event: made a backup of Element {((Element)element).Name}");
    }

    private void ItemHasBeenCommitted(object element)
    {
    // AddEditionEvent($"RowEditCommit event: Changes to Element {((Element)element).Name} committed");
    }

    private void ResetItemToOriginalValues(object element)
    {
    // ((Element)element).Sign = elementBeforeEdit.Sign;
    // ((Element)element).Name = elementBeforeEdit.Name;
    // ((Element)element).Molar = elementBeforeEdit.Molar;
    // ((Element)element).Position = elementBeforeEdit.Position;
    // AddEditionEvent($"RowEditCancel event: Editing of Element {((Element)element).Name} canceled");
    }
}
